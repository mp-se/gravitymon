<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="prev" title="Licence" href="license.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>Q &amp; A - GravityMon v2.0.0-alfa1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">GravityMon v2.0.0-alfa1</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/gravitymon_logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">GravityMon v2.0.0-alfa1</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="functionality.html">Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="format-template.html">Format Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Service Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling.html">Compiling the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licence</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Q &amp; A</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="q-a">
<h1>Q &amp; A<a class="headerlink" href="#q-a" title="Permalink to this headline">¶</a></h1>
<div class="section" id="my-device-is-no-going-in-to-sleep-after-fully-charged">
<h2>My device is no going in to sleep after fully charged<a class="headerlink" href="#my-device-is-no-going-in-to-sleep-after-fully-charged" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Calibrate the device in the web interface</p></li>
<li><p>Check the angle/tilt. If the device is reporting 90 degrees then its not going into sleep. Tilt the device and check if sleep works.</p></li>
<li><p>Check in reported voltage of the battery in the web interface. If this is higher than 4.15V the device believes its being charged. In that case adjust the voltage factor under hardware so the voltage drops below 4.15V.</p></li>
<li><p>Check if the <cite>always on</cite> option is activated in the web interface.</p></li>
</ul>
</div>
<div class="section" id="what-does-the-flashing-led-mean">
<h2>What does the flashing led mean?<a class="headerlink" href="#what-does-the-flashing-led-mean" title="Permalink to this headline">¶</a></h2>
<p>On an ESP32c3 or ESP32s3 there is a multicolor LED and the colors means the following:</p>
<ul class="simple">
<li><p>Blue = Configuration mode</p></li>
<li><p>White = WiFi setup mode</p></li>
</ul>
<p>On other devices there is only a single color led.</p>
<ul class="simple">
<li><p>Slow Blinking = Config Mode</p></li>
<li><p>Solid = WiFi setup mode</p></li>
</ul>
</div>
<div class="section" id="my-device-reports-a-temperature-of-273c-or-491f">
<h2>My device reports a temperature of -273C or -491F<a class="headerlink" href="#my-device-reports-a-temperature-of-273c-or-491f" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The DS18B20 temperature sensor cannot be found and this is the default value reported in this case.</p></li>
<li><p>Check the orientation of the sensor and the soldering.</p></li>
</ul>
</div>
<div class="section" id="calibration-error-unable-to-find-a-valid-formula">
<h2>Calibration error (unable to find a valid formula)<a class="headerlink" href="#calibration-error-unable-to-find-a-valid-formula" title="Permalink to this headline">¶</a></h2>
<p>If you have issues to get a calibration formula. When a formula has been created the device always tries to validate the formula against the supplied values and if there is a to high deviation on any of the values then the formula will be rejected.</p>
<p>The image here shows such a case, one of the values is out of bounds.</p>
<a class="reference internal image-reference" href="_images/qa_1.png"><img alt="Calibration Error" src="_images/qa_1.png" style="width: 500px;"/></a>
<p>To fix these this you can;</p>
<ul class="simple">
<li><p>remove the value from the list (setting the angle to zero will do that)</p></li>
<li><p>change the advanced setting (Formula max deviation) to a higher value and save the values again.</p></li>
</ul>
<p>In the case above this parameter was changed from 1.6 SG to 4 SG and the formula was accepted. The deviation on this point was just above 3 SG.</p>
</div>
<div class="section" id="how-can-i-filter-data-on-influxdb-without-needing-to-know-the-time-range">
<h2>How can I filter data on influxdb without needing to know the time range<a class="headerlink" href="#how-can-i-filter-data-on-influxdb-without-needing-to-know-the-time-range" title="Permalink to this headline">¶</a></h2>
<p>You can use any of the available fields to enter your custom data. An option is to use the token fields to
add some custom information to identify your brew. This can then be used to filter your data in influxdb.</p>
<p>When you switch brews you need to go in and change the token to identify the brewing session.</p>
<p>Change the format template for the influx target to include the token field. Now you will have an
field called event that you can filter on in influx.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gravity-format=${gravity-unit} gravity=${gravity},corr-gravity=${corr-gravity},
angle=${angle},temp=${temp},battery=${battery},rssi=${rssi}
</pre></div>
</div>
<p>to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gravity-format=${gravity-unit} gravity=${gravity},corr-gravity=${corr-gravity},
angle=${angle},temp=${temp},battery=${battery},rssi=${rssi},event=${token}
</pre></div>
</div>
</div>
<div class="section" id="device-only-reporting-data-once">
<h2>Device only reporting data once<a class="headerlink" href="#device-only-reporting-data-once" title="Permalink to this headline">¶</a></h2>
<p>If the device does not wake up from a deep sleep, this is most likely a hardware problem,
check the resistor / diode between D0 and RST. Wrong value can stop the device from wakeing up.</p>
</div>
<div class="section" id="what-does-the-messages-in-the-error-log-mean">
<h2>What does the messages in the error log mean<a class="headerlink" href="#what-does-the-messages-in-the-error-log-mean" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Not enough values for deriving formula</p>
<p>To create a formula its required to have at least 3 measurements.</p>
</li>
<li><p>Error validating created formula. Deviation to large, formula rejected</p>
<p>The device will try to create formulas with different complexities. It will try to
validate the formula using the supplied values. If the difference is more than 1.6 SG on any point
the formula will be rejected. Check the entered values if they seams to be reasonable.</p>
</li>
<li><p>No valid calibration values, please calibrate the device.</p>
<p>The gyro needs to be calibrated at 90 degrees (flat). This is done on the configuration page.</p>
</li>
<li><p>Low on memory, skipping push</p>
<p>The arduino libraries sometimes leak memory, this only occurs when running in configuration mode. To avoid
crashes the device will skip pushing data if the memory drops to much. Network connections seams to be connected
to memory leaks.</p>
</li>
<li><p>Unable to set header, invalid value</p>
<p>Check the format for your custom header. This means it has not a correct format.</p>
</li>
</ul>
</div>
<div class="section" id="http-error-codes">
<h2>HTTP error codes<a class="headerlink" href="#http-error-codes" title="Permalink to this headline">¶</a></h2>
<p>All these errors are standard http error codes. This are the common ones;</p>
<ul class="simple">
<li><p>400 - Bad request. Probably an issue with the post format. Check format in the format editor.</p></li>
<li><p>401 - Unauthorized. The service needs an token or other means to authenticate the device.</p></li>
<li><p>403 - Forbidden. Could be an issue with token or URL.</p></li>
<li><p>404 - Not found. Probably a wrong URL.</p></li>
</ul>
</div>
<div class="section" id="mqtt-error-codes">
<h2>MQTT error codes<a class="headerlink" href="#mqtt-error-codes" title="Permalink to this headline">¶</a></h2>
<p>MQTT connection errors:</p>
<ul class="simple">
<li><p>-1 - Connection refused</p></li>
<li><p>-2 - Send header failed</p></li>
<li><p>-3 - Send payload failed</p></li>
<li><p>-4 - Not connected</p></li>
<li><p>-5 - Connection lost</p></li>
<li><p>-6 - No stream</p></li>
<li><p>-7 - No HTTP server</p></li>
<li><p>-8 - Too little RAM available</p></li>
<li><p>-9 - Error encoding</p></li>
<li><p>-10 - Error writing to stream</p></li>
<li><p>-11 - Read timeout</p></li>
<li><p>-100 - Endpoint skipped since its SSL and the device is in gravity mode</p></li>
</ul>
<p>MQTT push on topic errors:</p>
<ul class="simple">
<li><p>-1 - Buffer to short</p></li>
<li><p>-2 - Overflow</p></li>
<li><p>-3 - Network failed connected</p></li>
<li><p>-4 - Network timeout</p></li>
<li><p>-5 - Network read failed</p></li>
<li><p>-6 - Network write failed</p></li>
<li><p>-10 - Connection denied</p></li>
<li><p>-11 - Failed subscription</p></li>
</ul>
</div>
<div class="section" id="wifi-error-codes">
<h2>WIFI error codes<a class="headerlink" href="#wifi-error-codes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>1 - No SSID found.</p></li>
<li><p>4 - Connection failed.</p></li>
<li><p>5 - Connection lot.</p></li>
<li><p>6 - Wrong password.</p></li>
<li><p>7 - Disconnected by AP.</p></li>
</ul>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="license.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Licence</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021-2024, Magnus Persson |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Q &amp; A</a><ul>
<li><a class="reference internal" href="#my-device-is-no-going-in-to-sleep-after-fully-charged">My device is no going in to sleep after fully charged</a></li>
<li><a class="reference internal" href="#what-does-the-flashing-led-mean">What does the flashing led mean?</a></li>
<li><a class="reference internal" href="#my-device-reports-a-temperature-of-273c-or-491f">My device reports a temperature of -273C or -491F</a></li>
<li><a class="reference internal" href="#calibration-error-unable-to-find-a-valid-formula">Calibration error (unable to find a valid formula)</a></li>
<li><a class="reference internal" href="#how-can-i-filter-data-on-influxdb-without-needing-to-know-the-time-range">How can I filter data on influxdb without needing to know the time range</a></li>
<li><a class="reference internal" href="#device-only-reporting-data-once">Device only reporting data once</a></li>
<li><a class="reference internal" href="#what-does-the-messages-in-the-error-log-mean">What does the messages in the error log mean</a></li>
<li><a class="reference internal" href="#http-error-codes">HTTP error codes</a></li>
<li><a class="reference internal" href="#mqtt-error-codes">MQTT error codes</a></li>
<li><a class="reference internal" href="#wifi-error-codes">WIFI error codes</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    </body>
</html>